<html>
<head>
	<title>Just-Boris's home page</title>
	<link href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/css/bootstrap-combined.min.css" rel="stylesheet">
	<style>
		.icon.forked {
			display: none;
			width: 20px;
			height: 20px;
		}
		.fork .icon.forked {
			display: inline;
		}
	</style>
	<script src="/basis/src/basis.js" basis-config></script>
	<script src="/js/basis-net-fixed.js"></script>
	<script type="text/javascript">
		basis.ready(function(){
			basis.require('basis.ui');
			basis.require('basis.data');

			var onSuccessLoad = function(transport, request, response) {
				var repos = new basis.data.Dataset({
					  items: response.map(function(repo) {
					  	return new basis.data.Object({
					  		data: repo
					  	});
					  })
					});
					RepoItem = basis.ui.Node.subclass({
					  className: 'RepoItem',
					  template: '<div class="row"><h5><span>{name}</span> '+
					  	'<small>(<a href="{html_url}">repo</a>)</small></h5><p class="muted {fork}"><img src="/img/fork.png" class="icon forked" title="Forked repository"/> {description}</p></div>',
					  binding: {
					    name: 'data:name',
					    html_url: 'data:html_url',
					    fork: 'data:fork',
					    description: 'data:description'
					  }
					}),
					RepoWithLink = RepoItem.subclass({
						template: '<div class="row"><h5><a href="/{name}">{name}</a> '+
					  	'<small>(<a href="{html_url}">repo</a>)</small></h5><p class="muted {fork}"><img src="/img/fork.png" class="icon forked" title="Forked repository"/> {description}</p></div>',
					}),
					list = new basis.ui.Node({
					  container: document.querySelector('.container'),
					  dataSource: repos,
					  template: '<div />',
					  childFactory: function(config) {
					  	if(basis.string.isEmpty(config.delegate.data.homepage)) {
					  		return new RepoItem(config);
					  	}
					  	else {
							return new RepoWithLink(config);
					  	}
					  }
					  // childClass: RepoItem
					});
			};
			new basis.net.AjaxTransport({
				method: 'GET',
				asynchronous: true,
				url: 'https://api.github.com/users/just-boris/repos',
				handler: {
					success: onSuccessLoad
				}
			}).request();
		});
	</script>
</head>
<body>
	<a href="https://github.com/just-boris"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png" alt="Fork me on GitHub"></a>
	<div class="navbar"><div class="navbar-inner">
		<ul class="nav">
			<li><a>Choose version:</a></li>
	  		<li class="divider-vertical"></li>
	  		<li class=""><a href="/">Angular JS</a></li>
	  		<li class="active"><a href="/ru/">Basis JS</a></li>
		</ul>
	</div></div>
	<div class="container">
		<h3>Hello! There is my repositories:</h3>
	</div>
	<script type="text/javascript">
	  var _gaq = _gaq || [];
	  _gaq.push(['_setAccount', 'UA-39285873-1']);
	  _gaq.push(['_trackPageview']);
	
	  (function() {
	    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
	    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
	    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
	  })();
	</script>
</body>
</html>